<svg width="1000" height="700" viewBox="0 0 1000 700" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="1000" height="700" fill="#f8f9fa"/>

  <!-- Title -->
  <text x="500" y="30" font-family="Arial, sans-serif" font-size="22" font-weight="bold" text-anchor="middle">Goal-Seeking System Architecture</text>

  <!-- Layer 1: Input Sources -->
  <g id="input-layer">
    <text x="100" y="70" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#333">Input Layer</text>

    <!-- Current State -->
    <rect x="50" y="90" width="150" height="80" fill="#e3f2fd" stroke="#1976d2" stroke-width="2" rx="5"/>
    <text x="125" y="115" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle">Current State</text>
    <text x="125" y="135" font-family="Arial, sans-serif" font-size="11" text-anchor="middle">• Position (x, y, z)</text>
    <text x="125" y="150" font-family="Arial, sans-serif" font-size="11" text-anchor="middle">• Velocity vectors</text>
    <text x="125" y="165" font-family="Arial, sans-serif" font-size="11" text-anchor="middle">• Sensor readings</text>

    <!-- Goal State -->
    <rect x="220" y="90" width="150" height="80" fill="#e3f2fd" stroke="#1976d2" stroke-width="2" rx="5"/>
    <text x="295" y="115" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle">Goal State</text>
    <text x="295" y="135" font-family="Arial, sans-serif" font-size="11" text-anchor="middle">• Target position</text>
    <text x="295" y="150" font-family="Arial, sans-serif" font-size="11" text-anchor="middle">• Success criteria</text>
    <text x="295" y="165" font-family="Arial, sans-serif" font-size="11" text-anchor="middle">• Constraints</text>
  </g>

  <!-- Layer 2: State Transition Generation -->
  <g id="transition-layer">
    <rect x="50" y="200" width="320" height="180" fill="#fff" stroke="#666" stroke-width="2" rx="8"/>
    <text x="210" y="225" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle">State Transition Generator</text>

    <!-- Scale processing boxes -->
    <rect x="70" y="240" width="280" height="40" fill="#fff3e0" stroke="#f57c00" stroke-width="1" rx="3"/>
    <text x="80" y="260" font-family="Arial, sans-serif" font-size="11">Scale 1x: Goal-level strategy planning</text>
    <circle cx="330" cy="260" r="8" fill="#4caf50"/>

    <rect x="70" y="285" width="280" height="40" fill="#fff3e0" stroke="#f57c00" stroke-width="1" rx="3"/>
    <text x="80" y="305" font-family="Arial, sans-serif" font-size="11">Scale 5x: Strategic path computation</text>
    <circle cx="330" cy="305" r="8" fill="#4caf50"/>

    <rect x="70" y="330" width="280" height="40" fill="#fff3e0" stroke="#f57c00" stroke-width="1" rx="3"/>
    <text x="80" y="350" font-family="Arial, sans-serif" font-size="11">Scale 10x/20x/40x: Tactical decisions</text>
    <circle cx="330" cy="350" r="8" fill="#4caf50"/>
  </g>

  <!-- Alignment Detection Process -->
  <g id="alignment">
    <rect x="400" y="200" width="250" height="180" fill="#fff" stroke="#666" stroke-width="2" rx="8"/>
    <text x="525" y="225" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle">Alignment Detection</text>

    <rect x="420" y="240" width="210" height="120" fill="#e8f5e9" stroke="#4caf50" stroke-width="1" rx="3"/>
    <text x="525" y="260" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle">Iterative Search Process</text>

    <text x="430" y="280" font-family="Arial, sans-serif" font-size="11">1. Compute phase differences</text>
    <text x="430" y="298" font-family="Arial, sans-serif" font-size="11">2. Calculate correlation scores</text>
    <text x="430" y="316" font-family="Arial, sans-serif" font-size="11">3. Check coupling strength</text>
    <text x="430" y="334" font-family="Arial, sans-serif" font-size="11">4. Iterate until aligned</text>
    <text x="430" y="352" font-family="Arial, sans-serif" font-size="11">5. Output: StateTransition</text>
  </g>

  <!-- Layer 3: Action Selection -->
  <g id="action-layer">
    <rect x="50" y="410" width="370" height="150" fill="#fff" stroke="#666" stroke-width="2" rx="8"/>
    <text x="235" y="435" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle">Multi-Criteria Action Selector</text>

    <!-- Scoring criteria -->
    <rect x="70" y="450" width="160" height="90" fill="#fce4ec" stroke="#c2185b" stroke-width="1" rx="3"/>
    <text x="150" y="470" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle">Scoring Criteria</text>
    <text x="80" y="490" font-family="Arial, sans-serif" font-size="10">• Goal alignment (35%)</text>
    <text x="80" y="505" font-family="Arial, sans-serif" font-size="10">• State compatibility (25%)</text>
    <text x="80" y="520" font-family="Arial, sans-serif" font-size="10">• Historical success (25%)</text>
    <text x="80" y="535" font-family="Arial, sans-serif" font-size="10">• Context score (15%)</text>

    <!-- Competition mechanism -->
    <rect x="240" y="450" width="160" height="90" fill="#e1f5fe" stroke="#0288d1" stroke-width="1" rx="3"/>
    <text x="320" y="470" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle">Selection Process</text>
    <text x="250" y="490" font-family="Arial, sans-serif" font-size="10">• Score all candidates</text>
    <text x="250" y="505" font-family="Arial, sans-serif" font-size="10">• Apply lateral inhibition</text>
    <text x="250" y="520" font-family="Arial, sans-serif" font-size="10">• Winner-take-all selection</text>
    <text x="250" y="535" font-family="Arial, sans-serif" font-size="10">• Output: SelectedAction</text>
  </g>

  <!-- Learning Feedback Stack -->
  <g id="feedback">
    <rect x="450" y="410" width="290" height="150" fill="#fff" stroke="#666" stroke-width="2" rx="8"/>
    <text x="595" y="435" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle">Learning Feedback Stack</text>

    <!-- FuzzyART component -->
    <rect x="470" y="450" width="120" height="90" fill="#fff8e1" stroke="#ffa000" stroke-width="1" rx="3"/>
    <text x="530" y="470" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle">FuzzyART</text>
    <text x="480" y="490" font-family="Arial, sans-serif" font-size="10">• Pattern categories</text>
    <text x="480" y="505" font-family="Arial, sans-serif" font-size="10">• Complement coding</text>
    <text x="480" y="520" font-family="Arial, sans-serif" font-size="10">• Vigilance: 0.7</text>
    <text x="480" y="535" font-family="Arial, sans-serif" font-size="10">• Learn rate: 0.1</text>

    <!-- Meta-learning -->
    <rect x="600" y="450" width="120" height="90" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="1" rx="3"/>
    <text x="660" y="470" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle">Meta-Learning</text>
    <text x="610" y="490" font-family="Arial, sans-serif" font-size="10">• Adjust vigilance</text>
    <text x="610" y="505" font-family="Arial, sans-serif" font-size="10">• Modify learning rate</text>
    <text x="610" y="520" font-family="Arial, sans-serif" font-size="10">• Track success rate</text>
    <text x="610" y="535" font-family="Arial, sans-serif" font-size="10">• Pattern memory</text>
  </g>

  <!-- Memory Bank -->
  <g id="memory">
    <rect x="770" y="410" width="180" height="150" fill="#fff" stroke="#666" stroke-width="2" rx="8"/>
    <text x="860" y="435" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle">Pattern Memory</text>

    <rect x="790" y="450" width="140" height="90" fill="#e8eaf6" stroke="#5e35b1" stroke-width="1" rx="3"/>
    <text x="860" y="470" font-family="Arial, sans-serif" font-size="11">• State→Action mappings</text>
    <text x="860" y="488" font-family="Arial, sans-serif" font-size="11" text-anchor="middle">• Success histories</text>
    <text x="860" y="506" font-family="Arial, sans-serif" font-size="11" text-anchor="middle">• Failure patterns</text>
    <text x="860" y="524" font-family="Arial, sans-serif" font-size="11" text-anchor="middle">• Context associations</text>
  </g>

  <!-- Output -->
  <rect x="150" y="590" width="170" height="60" fill="#e0f2fe" stroke="#0284c7" stroke-width="2" rx="5"/>
  <text x="235" y="615" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle">Motor Commands</text>
  <text x="235" y="635" font-family="Arial, sans-serif" font-size="11" text-anchor="middle">Action execution signals</text>

  <!-- Data flow arrows -->
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
    </marker>
    <marker id="feedback-arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#e91e63"/>
    </marker>
  </defs>

  <!-- Forward flow -->
  <path d="M 125 170 L 125 200" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  <path d="M 295 170 L 295 200" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  <path d="M 370 290 L 400 290" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  <path d="M 525 380 L 235 410" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  <path d="M 235 560 L 235 590" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrow)"/>

  <!-- Feedback paths -->
  <path d="M 320 620 L 595 560" stroke="#e91e63" stroke-width="2" stroke-dasharray="5,3" fill="none" marker-end="url(#feedback-arrow)"/>
  <path d="M 595 410 L 525 380" stroke="#e91e63" stroke-width="2" stroke-dasharray="5,3" fill="none" marker-end="url(#feedback-arrow)"/>
  <path d="M 770 485 L 740 485" stroke="#9c27b0" stroke-width="2" fill="none" marker-end="url(#arrow)"/>

  <!-- Legend -->
  <g id="legend">
    <rect x="780" y="80" width="200" height="100" fill="#fff" stroke="#999" stroke-width="1" rx="5"/>
    <text x="880" y="100" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle">Legend</text>

    <line x1="790" y1="120" x2="820" y2="120" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
    <text x="830" y="124" font-family="Arial, sans-serif" font-size="10">Data flow</text>

    <line x1="790" y1="140" x2="820" y2="140" stroke="#e91e63" stroke-width="2" stroke-dasharray="5,3" marker-end="url(#feedback-arrow)"/>
    <text x="830" y="144" font-family="Arial, sans-serif" font-size="10">Feedback</text>

    <circle cx="805" cy="160" r="8" fill="#4caf50"/>
    <text x="830" y="164" font-family="Arial, sans-serif" font-size="10">Scale alignment</text>
  </g>

  <!-- Annotations -->
  <text x="680" y="290" font-family="Arial, sans-serif" font-size="10" font-style="italic" fill="#666">Numerical search</text>
  <text x="680" y="305" font-family="Arial, sans-serif" font-size="10" font-style="italic" fill="#666">not real-time</text>
</svg>